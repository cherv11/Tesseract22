# Могущество библиотек
## Как ограниченный язык программирования способен на всё
Привет. Многое из того, что требовалось нам от обычного Питона, мы прошли. Под обычным Питоном я подразумеваю так называемую "Стандартную библиотеку". Питон сам по себе содержит только базовые вещи вроде тех, что мы видели. Так как мы тогда собираемся делать игры?  
Программисты очень любят делиться своим опытом. Вам почти никогда не нужно писать код, если он уже написан и встроен в одну из библиотек.  
![image](https://user-images.githubusercontent.com/56085790/138620237-c7fdd27e-8107-4a53-9f60-c1b54afee077.png)

Так что же такое "Библиотеки"? Это подключаемые модули, а на самом деле просто файлы Питона, написанные другими программистами. Сегодня вы узнаете:
- Где найти нужный функционал для решения любой задачи
- Как заставить Питон работать с файлами на компьютере
- Какие библиотеки мы будем использовать на курсе

## Методы и функции списков и строк
Мы не будем заниматься задачами по нахождению минимальных и максимальных элементов, а также писать алгоритмы сортировки. Если вы захотите, то легко разберётесь с этим сами. А мы воспользуемся тем, что дал нам прогресс:

```py
a = [7,-8,6,4,-2,-1,3,-5]

print(max(a))
>>> 7

print(min(a))
>>> -8

a = sorted(a)
print(a)
>>> [-8, -5, -2, -1, 3, 4, 6, 7]

print(sum(a))
>>> 4
```
О том, что выполняют эти функции, очень легко догадаться, но функции строк мы всё таки прокомментируем:
```py
a = ' Кривизна материи'

print(a.count('и'))    # Считает количество определённых букв в строке a
>>> 4

a = a.strip()    # Убирает определённые символы слева и справа, по умолчанию пробел
print(a)
>>> 'Кривизна материи'

print(a.strip('и'))
>>> 'Кривизна матер'

print(a.replace(' ', ''))    # Заменяет одни символы на другие
>>> 'Кривизнаматерии'

print(a.lower())    # Приводят к нижнему регистру
>>> 'кривизна материи'

print(a.upper()))    # Приводят к верхнему регистру
>>> 'КРИВИЗНА МАТЕРИИ'

if a.startswith('К'):    # Строка начинается с символа/ов, возвращает True/False
  print(1)
>>> 1

if a.endswith('тии'):    # Строка заканчивается символом/ами, возвращает True/False
  print(2)
# И ничего

if a.lower().startswith('к'):    # Часто используется так
  print(3)
>>> 3

b = a.split()    # Делит строку по определённому символу и возвращет список, по умолчанию пробел
print(b)
>>> ['Кривизна', 'материи']
  
c = a.split('и')
print(c)
>>> ['Кр', 'в', 'зна матер', '', '']

a = ' '.join(b)    # Соединяет список в одну строку с разделителем
print(a)
>>> 'Кривизна материи'

print('и'.join(c))
>>> 'Кривизна материи'

print(':'.join(c))
>>> 'Кр:в:зна матер::'

print('|'.join(b))    # А так иногда используется
>>> 'Кривизна|материи'
```

## Словари
Словарь — dict — это последовательность элементов, вместо индексов в котором используются ключи. Давайте посмотрим, как это:
```py
d = {'Вероника': 232, 'Алёна': 267}
print(d['Вероника'])
>>> 232
```
И вот у нас уже есть не просто список имён, но и баллы, которые каждый из этих людей набрал за ЕГЭ (Все имена случайны, а совпадения вымышлены)! Вот так элементы словаря можно добавлять и удалять:
```py
d['Никита'] = 241

del d['Никита']
```
Во многих случаях словари гораздо удобнее использовать, чем списки. Благодаря вложенным словарям на Веронику можно составить целое досье:
```py
a = {'Вероника': {'Дата рождения': '13.09.1984',
                  'Любимая еда': ['Макарошки с сыром', 'Салат Оливье', 'Пицца Пепперони'],
                  'Баланс': {'Наличными': 1200.50, 'Мелочью': 53.80, 'В банке': 10712.00}
                  }
     'Алёна': ...
    }
print(a['Вероника']['Любимая еда'])
>>> ['Макарошки с сыром', 'Салат Оливье', 'Пицца Пепперони']
```
Извлечь всю информацию из словаря можно следующим образом:
```py
a = {'Вероника': 232, 'Алёна': 267}

for i in a:
  print(i, a[i])
>>> Вероника 232
>>> Алёна 267
```
## Множества — списки уникальных элементов
Множество — `set` — это список, в котором нет порядковых номеров:
```py
a = ['Марина', 'Андрей', 'Кирилл', 'Владимир', 'Игорь', 'Виктория', 'Марина']
a = set(a)
print(a)
>>> {'Андрей', 'Виктория', 'Игорь', 'Кирилл', 'Владимир', 'Марина'}
a = list(a)
print(a)
>>> ['Андрей', 'Виктория', 'Игорь', 'Кирилл', 'Владимир', 'Марина']
```
Как можно заметить, элементы потеряли свой порядок. А ещё исчезли повторяющиеся элементы. Это значит, что следующая операция помогает нам избавиться от дубликатов в списке:
```py
a = ['Марина', 'Андрей', 'Кирилл', 'Владимир', 'Игорь', 'Виктория', 'Марина']
a = list(set(a))
```

Теперь мы можем решить все задачи из вступительного теста! Нерешённой осталась девятая:
```
Буквы английского алфавита решили сыграть в игру на выживание. Правила игры таковы. 
Дана строка с маленькими буквами, например, "abazz". 
Любые две одинаковые буквы, даже если они не стоят рядом, превращаются в одну, следующую по алфавиту. 
Буква Z превращается в букву А.
Игра продолжается, пока в строке возможны превращения одних букв в другие. 
Например, для данного примера цепочка превращений такова: "abazz"->"bba"->"ca". 
Дано: строка с прописными английскими буквами. Ответ: такая же строка. 
```
Решение:
```py
letters = ('a', 'b', 'c', 'd', 'e', 'f', 'j', 'h', 'i', 'j', 'k', 'l', 'm',
           'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z')
a = "abazz"
while len(a) != len(set(a)):
    for i in range(len(letters)):
        t = letters[i]
        count = a.count(t)
        if count:
          newt = letters[i+1] if i < len(letters)-1 else letters[0]
          a = a.replace(t, '') + newt * (count // 2) + t * (count % 2)
print(a)
```

### Задачи ❓
1. Найдите последнее из любимых блюд Вероники, а также посчитайте, сколько денег у неё есть в сумме:
```py
a = {'Вероника': {'Дата рождения': '13.09.1984',
                  'Любимая еда': ['Макарошки с сыром', 'Салат Оливье', 'Пицца Пепперони'],
                  'Баланс': {'Наличными': 1200.50, 'Мелочью': 53.80, 'В банке': 10712.00}
                  }
    }
```
2. Сделайте обработчик команд! Ну, пока что, одной команды... С клавиаутры пишется `square n`, где `n` — это число, которое нужно возвести в квадрат. Вам нужно понять, что написана именно эта команда, а не что-то ещё, при помощи `startswith()`, затем отделить число от команды и возвести его в квадрат, что и будет выводом в консоль!  

## Использование библиотек
```py
import math
import random
import os
import time
import numpy

from math import pi
print(pi)
>>> 3.141592653589793

import random as rd
```

### Атрибуты и методы — свойства и действия объекта
Методы, или функции, выполняют действия и иногда возвращают результат:
```py
sin = math.sin(90*math.pi/180)    # синус 90 градусов
a = abs(-4)    # модуль числа
print('Кровать')    # вывод на экран
num = round(5.559, 2)    # округление до 2 знаков после запятой
```
В отличие от функций, атрибуты — это обычные переменные, и для них не нужны скобки:
```py
print(math.pi)
>>> 3.141592653589793
```

### Как сломать Питон
```py
print = 4
print('a')
>>> TypeError: 'int' object is not callable
```

## Немного функций
Здесь я просто оставлю почти все функции этих библиотек, которыми мы будем пользоваться в учебном году. Заходите сюда в любое время `^_^`
### math
```py
math.ceil(5.4)    # округление вверх
math.floor(5.9)    # округление вниз
math.factorial(12)    # факториал числа
math.sin(pi/2)    # синус в радианах
math.cos(pi)    # также косинус
math.log(8, 2)    # логарифм
math.sqrt(5)    # квадратный корень
```

### os
```py
if not os.path.exists('Картиночки'):    # Проверяет, есть ли такая папка
  os.mkdir('Картиночки')    # Создаёт папку

a = os.listdir('Картиночки')    # Список файлов в папке
print(a)
>>> ['Программа.txt', 'Тессеракт.png']

os.remove('Картиночки/Тессеракт.png')    # Удаляет файл, минуя корзину. Использовать с осторожностью!
# Если у вас не работает / в пути, попробуйте заменить его на два обратных слеша:  
# 'Картиночки\\Тессеракт.png'
```

### random
```py
random.randint(1, 6)    # случайное число от 1 до 6 включительно

a = [1,2,3]
print(random.choice(a))    # случайный выбор из списка
>>> 3

random.shuffle(a)    # функция перемешивает список и автоматически присваивает его к a
print(a)
>>> [3, 1, 2]
```

### time
```py
a = time.time()    # возвращает время в секундах, прошедшее с начала эпохи 1 января 1970
a = time.ctime(a)    # превращает эти секунды в понятную нам дату
print(a)
>>> Mon Oct 25 11:19:49 2021

# а так можно вывести строку любого формата вообще
t = time.strftime("%d.%m.%Y, %H:%M:%S", time.localtime())  
print(t)
>>> 25.10.2021, 11:32:54
```

А это очень популярная фича, которую мы будем использовать не раз — подсчёт времени, потраченного на выполнение кода:
```py
start_time = time.time()
a = 0
for i in range(1000000):
    a += i
print(time.time()-start_time, a)
>>> 0.09502077102661133 499999500000
```
## Создание функций
Если у нас нет нужной функции, мы можем создать свою:
```py
def multiply(a, b=1):
    return a*b

def palyndrom(word):
    word = word.lower().replace(' ', '')
    return word == word[::-1]
```
Создание функции и её вызов — это разные вещи. Написав функцию, мы говорим Питону, что теперь можно её использовать, но теперь её надо использовать!
```py
if palyndrom('Искать такси'):
  print(multiply(5, 4))
>>> 20
```
### Задачи ❓
Не забудьте `import`!  
3. Вам нужно достать случайную картинку из папки `pics`. Вот незадача: в папке лежат не только картинки, кто-то напихал туда чёрт знает чего! Презентации, таблицы и даже установщик браузера Амиго! Благо, есть метод `endswith()`, а все картинки у нас в фотмате `.png`. Получите список картинок и выведите случайную.  
4. Нет, ну если владельца презентации нам ещё предстоит найти, браузер Амиго мы точно терпеть не можем! Нужно его удалить. Предлагаю для этого найти в папке `pics` такой файл, который содержит подстроку `Amigo`. Она может быть и с маленькой буквы, и в середине, так что используйте такой код: `if 'amigo' in i.lower()`. А ещё не забывайте, что при удалении нужно указать не только название файла, но и весь путь вместе с папкой `pics`.  
5. Который час? Выведите строку вида `"10ч15м"`, используя `time.strftime()`.  
